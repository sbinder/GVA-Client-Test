(function(){this.IndexViewController=(function(){a.prototype.XID=null;a.prototype.API="http://localhost:54870/";function a(){this.hideAll();$('#eulaForm input[type="submit"]').click((function(b){return function(c){c.preventDefault();b.XID="0";return b.initialAuth()}})(this));$("#reg1demo").click((function(b){return function(c){c.preventDefault();CookieJar.writeTemp("xid",1);return window.location.replace("index.html")}})(this));$("#reg1reg").click((function(b){return function(c){c.preventDefault();return b.registerMachine()}})(this));this.XID=CookieJar.read("xid");if((this.XID!=null)&&this.XID!==""){this.initialAuth()}else{$("#EULA").show()}}a.prototype.initialAuth=function(){this.showConnecting();if((this.XID==null)||this.XID===""){return}return $.ajax({type:"GET",url:this.API+"api/initial/"+this.XID,success:(function(b){return function(c,e,d){return b.gotInit(c)}})(this)})};a.prototype.gotInit=function(c){var b;$("#keyhole").html(c);this.hideAll();b=$.parseJSON(c);if(b.Key===0){$("div#Register1").fadeIn();return}if(b.Key===1){$("input#username").val("Demonstration").attr("disabled","disabled");$("input#password").val("Demonstration").attr("disabled","disabled")}if(b.Key===1||b.Key.length>12){return $("div#Signin").fadeIn()}};a.prototype.hideAll=function(){$("div#connecting").hide();$("div#EULA").hide();$("div#Register1").hide();return $("div#Register2").hide()};a.prototype.showConnecting=function(){this.hideAll();return $("div#connecting").fadeIn()};a.prototype.registerMachine=function(){return alert("Not yet implemented.")};a.prototype.SignIn=function(){this.hideAll();return $("div#TXCenter").fadeIn()};return a})();$(function(){return new IndexViewController})}).call(this);