(function(){var b,a=function(c,d){return function(){return c.apply(d,arguments)}};b=(function(){c.prototype.API="http://localhost:54870/";c.prototype.transaction=0;c.prototype.balance=0;c.prototype.direction=-1;function c(){this.GotTXKey=a(this.GotTXKey,this);this.ShowTX=a(this.ShowTX,this);$("body").keydown((function(d){return function(e){if($("div#GiftCenter").is(":visible")){return d.GotTXKey(e)}}})(this));if(CookieJar.xread()){window.location.replace("index.html")}$("#ActTel").focus().keypress((function(d){return function(e){var f,g;f=new RegExp("^[a-zA-Z0-9]+$");g=String.fromCharCode(e.charCode!=null?e.charCode:e.which);if(f.test(g)){return true}e.preventDefault();return false}})(this));$("#lookupAct").click((function(d){return function(e){e.preventDefault();return d.LookupAct()}})(this));$("#lookupTel").click((function(d){return function(e){e.preventDefault();return d.LookupTel()}})(this))}c.prototype.LookupAct=function(){var d;d=$("form#TX").serialize();return $.ajax({type:"POST",data:d,url:this.API+"client/lookupAct/",success:(function(e){return function(f,h,g){return e.gotAccount(f)}})(this)})};c.prototype.gotAccount=function(d){this.HideAll();this.balance=d.giftbal;this.transaction=0;$("div#current span.val").html(this.Money(this.balance));this.ShowTX();return $("div#GiftCenter").fadeIn(500)};c.prototype.LookupTel=function(){};c.prototype.HideAll=function(){return $("div#TXCenter").hide()};c.prototype.Money=function(f){var d,e,g;e="0";d="00";g=""+f;if(g.length<2){if(g.length===1){d="0"+g}}else{e=g.substring(0,g.length-2);if(e.length===0){e="0"}d=g.substring(g.length-2)}return"$"+e+"."+d};c.prototype.ShowTX=function(){$("div#amount").html(this.Money(this.transaction));return $("div#new span.val").html(this.Money(this.balance+(this.transaction*this.direction)))};c.prototype.GotTXKey=function(d){var e,f,g,h;e=this.transaction;f=new RegExp("^[0-9]+$");g=String.fromCharCode(d.which);if(f.test(g)){this.transaction*=10;this.transaction+=parseInt(g)}if(d.which===8||d.which===46){h=""+this.transaction;if(h.length>1){this.transaction=parseInt(h.substring(0,-1+h.length))}else{this.transaction=0}}if(this.balance+(this.transaction*this.direction)<0){this.transaction=e}return this.ShowTX()};return c})();$(function(){return new b})}).call(this);